
(function(){$.fn.smint=function(j){var e=$.extend({scrollSpeed:500,mySelector:"div"},j);$(this).addClass("smint");var f=new Array(),g=0,d=$(".smint").height(),a=$(".smint"),c=$(".smint a"),i=a.height();if(e.scrollSpeed){var h=e.scrollSpeed}if(e.mySelector){var b=e.mySelector}return c.each(function(l){var n=$(this).attr("href").split("#")[1];if(!$(this).hasClass("extLink")){$(this).attr("id",n)}f.push(Array($(b+"."+n).position().top-d,$(b+"."+n).height()+$(b+"."+n).position().top,n));var m=a.offset().top;var k=function(p){var o=$(window).scrollTop()+i;if(o>m+i){a.css({position:"fixed",top:0,left:0}).addClass("fxd");$("body").css("padding-top",d)}else{a.css("position","relative").removeClass("fxd");$("body").css("padding-top","0")}if(f[l][0]<=o&&o<=f[l][1]){if(p=="up"){$("#"+n).addClass("active");$("#"+f[l+1][2]).removeClass("active")}else{if(l>0){$("#"+n).addClass("active");$("#"+f[l-1][2]).removeClass("active")}else{if(p==undefined){$("#"+n).addClass("active")}}}$.each(f,function(q){if(n!=f[q][2]){$("#"+f[q][2]).removeClass("active")}})}};k();$(window).scroll(function(){var o=$(this).scrollTop()+i;if(o>g){direction="down"}else{if(o<g){direction="up"}}g=o;k(direction);if($(window).scrollTop()+$(window).height()==$(document).height()){c.removeClass("active");$(".smint a:not('.extLink'):last").addClass("active")}else{c.last().removeClass("active")}});$(this).on("click",function(r){var o=a.height();r.preventDefault();var q=$(this).attr("href").split("#")[1];var p=$(b+"."+q).offset().top-o;$("html, body").stop().animate({scrollTop:p},h);if($(this).hasClass("extLink")){return false}});$(".intLink").on("click",function(r){var o=a.height();r.preventDefault();var q=$(this).attr("href").split("#")[1];if(a.hasClass("fxd")){var p=$(b+"."+q).position().top-o}else{var p=$(b+"."+q).position().top-o*2}$("html, body").stop().animate({scrollTop:p},h);if($(this).hasClass("extLink")){return false}})})};$.fn.smint.defaults={scrollSpeed:500,mySelector:"div"}})(jQuery);